<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Visual Abductive reasoning</title>
        <!-- Bootstrap v3.0.3 -->
        <link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet">
        <style>
            .bubble-highlight-1 {
            background-color: #f7b731; /* Adjust the color as needed */
            color: #fff;
            padding: 2px 5px; /* Adjust padding for desired bubble size */
            margin-top: 10px;
            border-radius: 10px; /* Adjust border-radius for rounded corners */
            }
            .bubble-highlight-2 {
            background-color: #e120ce; /* Adjust the color as needed */
            color: #fff;
            padding: 2px 5px; /* Adjust padding for desired bubble size */
            border-radius: 10px; /* Adjust border-radius for rounded corners */
            }
            .bubble-highlight-3 {
            background-color: #7f32dc; /* Adjust the color as needed */
            color: #fff;
            padding: 5px 10px; /* Adjust padding for desired bubble size */
            border-radius: 10px; /* Adjust border-radius for rounded corners */
            }
            .bubble-highlight-4 {
            background-color: #f7317a; /* Adjust the color as needed */
            color: #fff;
            padding: 5px 10px; /* Adjust padding for desired bubble size */
            border-radius: 10px; /* Adjust border-radius for rounded corners */
            }
            li {
            margin-bottom: 15px;
            }
            .big-highlight {
                color: rgb(110, 5, 5);
                font-weight: bold;
            }
            .true-sentence {
                color: #11a720;
            }
            .eval-sentence {
                color: #1a6aac;
            }
        </style>
    </head>
    <body>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <section class="container" id="SET1" style="margin-bottom: 15px; padding: 10px; font-family: Verdana, Geneva, sans-serif; color: #000000; font-size: 10pt;">
            <!-- Instructions -->
            <div class="row">
                <div class="col-xs-12 col-md-12">
                    <div class="panel panel-info" style="border-color: #4a90e2;">
                        <div class="panel-heading" style="background-color: #4a90e2; border-color: #004080;">
                            <h3 class="panel-title" style="color: #fff;">Welcome!</h3>
                        </div>
                        <div class="panel-body">
                            <p>Welcome to this task! Your goal is to grade a <span class="eval-sentence">description</span> after watching a video. Please start by reading the instructions below.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Instructions -->
        </section>
        <section class="container" id="full" style="margin-bottom: 15px; padding: 10px; font-family: Verdana, Geneva, sans-serif; color: #333333; font-size: 10pt;">
            <fieldset>
                <div class="panel-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title" style="font-weight: bold">Full Instructions &nbsp; &nbsp; <a
                                data-toggle="collapse" href="#collapse0"
                                style="color:#0080ff;font-weight:normal;text-decoration: underline;">(Expand/Collapse)</a>
                            </h4>
                        </div>
                        <div class="panel-collapse collapse" id="collapse0" style="margin: 10px;">
                            <div style="max-width: 1200px; margin: 20px auto; padding: 20px; background-color: #fff; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); border-radius: 10px;">
                                <h2 style="color:black;">Task Instructions</h2>
                                <p>Thanks for participating in this HIT! You will be grading the <span class="eval-sentence">Main description</span>. These descriptions are about the events in a funny video.</p>
                                <p>You will be rating (from 1-5) on the basis of <span class="bubble-highlight-1">Specificity</span> and <span class="bubble-highlight-2">Content similarity</span>, as defined below: </p>
                                <div style="border: 2px dotted #007bff; border-radius: 10px; padding: 15px;">
                                    
                                    
                                        <strong style="color: orangered;"><span class="bubble-highlight-1">Specificity</span></strong> measures the extent to which the <span class="eval-sentence"> Main description</span> includes detailed and distinguishing features that are specific to the video.
                                            <ul>
                                                <li>High specificity means the <span class="eval-sentence">Main description</span> is rich in detail and unique elements, and these elements are related to the contents of the video (or what could happen after the events in the video). Concerete words are used that indicate confidence in the description.</li>
                                                <li>Low specificity means the <span class="eval-sentence">Main description</span> is more general and might apply to many different scenarios. Words that indicate uncertainty or lack of concreteness are used.</li>
                                            </ul>
                                        <h4>Example:</h4>
                                        <div class="story-excerpt" style="padding-left: 20px; padding-bottom: 20px;">
                                            <video id="video" width="30%" height="auto" controls>
                                                <source src="https://ubc-cv-sherlock.s3.us-west-2.amazonaws.com/oops_val_v1/4_A_preevent.mp4" 
                                                 type="video/mp4">
                                            </video> 
                                        </div>
                                        <span class="eval-sentence">Main description</span>: Given the complexity of firearms, there could be a jam or other malfunction that the shooter has to safely rectify before continuing to shoot.
                                        <br>
                                        <br>
                                        <b>Rating:</b> 2/5 (Low specificity, as it is a general statement about firearms but is somewhat related to the video. Moreover, words that indicate uncertainty are used, such as "could be" and "or other".)
                                        <br>
                                        <br>
                                        <span class="eval-sentence">(Alternative) Main description</span>: The gun may get jammed and malfunction, stopping the shooter from firing.
                                        <br>
                                        <br>
                                        <b>Rating:</b> 3/5 (Medium specificity, similar to the above sentence but more directly considers the video. Some words such as "may" indicate uncertainty.)
                                        <br>
                                        <h4>Example:</h4>
                                        <div class="story-excerpt" style="padding-left: 20px; padding-bottom: 20px;">
                                            <video id="video" width="30%" height="auto" controls>
                                                <source src="https://ubc-cv-sherlock.s3.us-west-2.amazonaws.com/oops_val_v1/41_A_preevent.mp4" 
                                                 type="video/mp4">
                                            </video> 
                                        </div>
                                        <span class="eval-sentence">Main description</span>: The man blew the candles out on the cake. The candles go out and everyone cheers.
                                        <br>
                                        <br>
                                        <b>Rating:</b> 5/5 (Very high specificity, as it is a detailed description of the events that could happen in the video with low uncertainty.)
                                        <br>
                                        <br>
                                        <span class="eval-sentence">(Alternative) Main description</span>: It is common for people to sing 'Happy Birthday' to celebrate someone's birthday right before they blow out the candles on their cake.
                                        <br>
                                        <br>
                                        <b>Rating:</b> 1/5 (Very low specificity, as it is a general statement about birthdays and not specific to the video.)

                                </div>
                                <br>
                                <div style="border: 2px dotted #007bff; border-radius: 10px; padding: 15px;">
                                    
                                        <strong style="color: orangered;"><span class="bubble-highlight-2">Content similarity</span></strong> measures how closely the content of the <span class="eval-sentence">Main description</span> matches the content of any of the <span class="true-sentence">True descriptions</span>. 
                                        This metric evaluates the overlap in information, phrasing, and key elements between the two descriptions.
                                            <ul>
                                                <li>High content similarity means the <span class="eval-sentence">Main description</span> captures the same information as any of the <span class="true-sentence">True descriptions</span>.</li>
                                                <li>Low content similarity means the <span class="eval-sentence">Main description</span> differs in content compared to any of the <span class="true-sentence">True descriptions</span>.</li>
                                            </ul>
                                        
                                        <h4>Example:</h4>
                                        <div class="story-excerpt" style="padding-left: 20px; padding-bottom: 20px;">
                                            <video id="video" width="50%" height="auto" controls>
                                                <source src="https://ubc-cv-sherlock.s3.us-west-2.amazonaws.com/oops/oops_val_v3/768_A_preevent.mp4" 
                                                 type="video/mp4">
                                            </video> 
                                        </div>
                                        <span class="true-sentence">True descriptions</span>:
                                        <ul>
                                            <li>Option 1: The boy makes it to the top of the other side of the structure without falling.</li>
                                            <li>Option 2: The boy loses his balance and falls as he travels down.
                                            <li>Option 3: A second person comes into view and the two bump into each other, causing the boy to fall. </li>
                                        </ul>
                                        <span class="eval-sentence">Main description</span>: The person attempts the trick again, successfully completes it, and rides away, demonstrating perseverance and improvement in skill.
                                        <br>
                                        <br>
                                        <b>Rating:</b> 4/5 (Quite Similar to Option 1, in terms of the meaning)
                                            
                                </div>     
                            </div>
                            <div style="max-width: 1200px; margin: 20px auto; padding: 20px; background-color: #fff; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); border-radius: 10px;">
                            <h2>Guidelines:</h2>
                            <ul>
                                <li style="color: green;"><b>Please read the descriptions carefully.</b></li>
                                <li style="color: green;"><b>Please watch the video completely. Note that the main description contents may not be present in the video itself, but could simply be a hypothesis of what happens next.</b></li>
                                <li style="color: green;"><b>Be as reasonable as you can, and make a smart guess if you are unsure.</b></li>
                                <li style="color: green;"><b>When measuring content similarity, main descriptions can be very different from any of the true descriptions. Make your best guess as to which one is most similar in terms of specificity and content, and rate according to that.</b></li>
                                
                            </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </fieldset>
        </section>
        <section class="container" style="margin-bottom: 15px; padding: 10px; font-family: Verdana, Geneva, sans-serif; color: #333333; font-size: 10pt;">
            <form>
                <div class="task1">
                    <h2>Task: </h2>
                    <div class="three-part" style="display: flex; min-width: 800px;">
                        <div class="part1" style="display: block; width: 33%;">
                            <div style="display: block; width: 95%; height: 250px; background-color: #d1e0ec; margin-bottom: 20px; padding: 5px;">
                                <h4>Part 1:</h4>
                                <div class="video-wrapper" style="display: flex; justify-content: center; align-items: center;">
                                    <video id="video" style="display: block; max-height: 200px; max-width: 100%;" controls muted>
                                        <source src="https://ubc-cv-sherlock.s3.us-west-2.amazonaws.com/oops/{{task.row_data['set']}}/{{task.row_data['preevent']}}" type="video/mp4">
                                        <!-- <source src="https://ubc-cv-sherlock.s3.us-west-2.amazonaws.com/oops_val_v1/11_A_preevent.mp4" type="video/mp4"> -->
                                    </video> 
                                </div>
                            </div>
                        </div>
                        <div class="part2" style="display: block; width: 33%;">
                            <div style="display: block; width: 95%; height: 250px; background-color: #d1e0ec; margin-bottom: 20px; padding: 5px;">
                                <h4>Part 2 (Hidden)</h4>
                            </div>
                            Think about what could happen in Part 3 (the outcome of the video). <br>
                            <span class='big-highlight'>Write three possible diverse descriptions on what will happen in Part 2 to lead to any outcome in Part 3.</span>
                            <br>
                            <div style="margin-left: 10px; margin-top: 10px;"> 
                                <textarea name="#txtArea1a1" id="txtArea1a1" rows="3" style="width: 90%;" placeholder="Describe WHY and HOW (rationale) to reach Part 3." required></textarea>
                            </div>
                            <br>
                            <div style="margin-left: 10px;">
                                <textarea name="#txtArea1b1" id="txtArea1b1" rows="3" style="width: 90%;" placeholder="Describe WHY and HOW (rationale) to reach Part 3." required></textarea>
                            </div>
                            <br>
                            <div style="margin-left: 10px;">
                                <textarea name="#txtArea1c1" id="txtArea1c1" rows="3" style="width: 90%;" placeholder="Describe WHY and HOW (rationale) to reach Part 3." required></textarea>
                            </div>
                            <span style="font-size:8pt">Please write at least 8 words per description. All descriptions should be unique. Please avoid using "it", "he", "she" or "they"; instead use specific descriptions like "the cat" or "the boy on the skateboard". </span>
                        </div>
                        <div class="part3" style="display: block; width: 33%;">
                            <div style="display: block; width: 95%; height: 250px; background-color: #d1e0ec; margin-bottom: 20px; padding: 5px;">
                                <h4>Part 3 (Hidden)</h4>
                            </div>
                            <p style="padding-left: 20px;padding-top: 60px;">Think about what could happen in the outcome here!<br><br> You should consider many possible outcomes, then write the descriptions in Part 2.<br><br> For an example of how each part looks, please see the instructions above.</p>
                            <!-- Describe three diverse possibilities of what could happen in this part.
                            <div style="margin-left: 10px; margin-top: 10px;">
                                <textarea  name="#txtArea1a2" id="txtArea1a2" rows="2" style="width: 90%;" placeholder="Description 1" required></textarea>
                            </div>
                            <br>
                            <div style="margin-left: 10px;">
                                <textarea  name="#txtArea1b1" id="txtArea1b2" rows="2" style="width: 90%;" placeholder="Description 2" required></textarea>
                            </div>
                            <br>
                            <div style="margin-left: 10px;">
                                <textarea  name="#txtArea1c1" id="txtArea1c2" rows="2" style="width: 90%;" placeholder="Description 3" required></textarea>
                            </div> -->
                        </div>
                    </div>
                    <div class="three-part" style="display: block;">
                        First, watch the video below. The video shows a part of a funny event. The descriptions are about the events in the video, and may hypothesize what is happening after this part of the video.
                        <br>
                        <br>
                        <div class="story-excerpt" style="padding-left: 20px; padding-bottom: 20px;">
                            <video id="video" width="60%" height="auto" controls>
                                <source src="{{task.row_data['video']}}"
                                 type="video/mp4">
                            </video> 
                        </div>
                        <br>
                        <br>
                        You are provided with a <span class="eval-sentence">Main Description</span> for the video:
                        <br>
                        <br>
                        <div class="part1" style="border: 2px dotted #0c2b89; border-radius: 10px; padding: 15px;">
                            <b><span class="eval-sentence">Main Description</span>:</b> <span id="desciption1">{{task.row_data['pred']}}</span>       
                        </div>
                    </div>
                    <br>
                    <b>🚧 Please see examples in instuctions before attempting these questions</b>
                    <h5 class="big-highlight">Question 1: Rate the <span class="eval-sentence">Main Description</span> in terms of <span class="bubble-highlight-1">Specificity</span> with respect to the event in the video, or what could happen after this event in the video.</h5>
                    <span style="font-size: 8pt; color: grey;">(Rate from 1-5)</span>
                    <div>
                        <input type="radio" name="specificity1" value="1" required> 1 = Very Low Specificity <br>
                        <input type="radio" name="specificity1" value="2"> 2 = Low Specificity <br>
                        <input type="radio" name="specificity1" value="3"> 3 = Medium Specificity <br>
                        <input type="radio" name="specificity1" value="4"> 4 = High Specificity <br>
                        <input type="radio" name="specificity1" value="5"> 5 = Very High Specificity <br>
                    </div>
                    <br>
                    <h5 class="big-highlight">Question 2: How does the <span class="eval-sentence">Main Description</span> compare to MOST SIMILAR description among the <span class="true-sentence">True Descriptions</span> (seen below) in terms of <span class="bubble-highlight-2">Content similarity</span>?</h5>
                    <br>
                    <div class="part1" style="border: 2px dotted #12890c; border-radius: 10px; padding: 15px;">
                        <b><span class="true-sentence">True Descriptions</span>:</b> 
                        <list>
                            <li>Option 1: {{task.row_data['gt1']}}</li>
                            <li>Option 2: {{task.row_data['gt2']}}</li>
                            <li>Option 3: {{task.row_data['gt3']}}</li>      
                        </list>
                    </div>
                    <br>
                    <span style="font-size: 8pt; color: grey;">(Rate from 1-5)</span>
                    <div>
                        <input type="radio" name="content_similarity1" value="1" required> 1 = Not Similar<br>
                        <input type="radio" name="content_similarity1" value="2"> 2 = Little Similar<br>
                        <input type="radio" name="content_similarity1" value="3"> 3 = Somewhat Similar<br>
                        <input type="radio" name="content_similarity1" value="4"> 4 = Quite Similar<br>
                        <input type="radio" name="content_similarity1" value="5"> 5 = Exactly Same<br>
                </div>
                    
                </div>
                <br>
                
                <br>
                <div>
                    <input name="checkbox3" type="checkbox"/><i> Optional Feedback: </i> Something about the HIT is unclear/you have additional feedback
                    <div id="fb-container3" style="display:none">
                        <p style="font-size:8pt;color:grey;margin-left:20px">Your additional fedback:</p>
                        <textarea cols="50" name="#fb-container3" rows="2" style="margin-left:10px;margin-top:10px"></textarea>
                    </div>
                </div>
                <button class="submit btn btn-primary" id="submitBtn" style="margin-top: 20px;">Submit</button>
                <span id="error-box" class="hidden" style="color: red;">
                    <p>Please complete all tasks before submitting.</p>
                </span>
            </form>
        </section>
        <script>
            $(function () {
                $("input[name=checkbox1]").click(function () {
                    var checked = $("input[name=checkbox1]:checked").length;
                    if (checked == 0) {
                        $('#fb-container1').hide();
                    } else {
                        $('#fb-container1').show();
                    }
                });
            });
            $(function () {
                $("input[name=checkbox2]").click(function () {
                    var checked = $("input[name=checkbox2]:checked").length;
                    if (checked == 0) {
                        $('#fb-container2').hide();
                    } else {
                        $('#fb-container2').show();
                    }
                });
            });
            $(function () {
                $("input[name=checkbox3]").click(function () {
                    var checked = $("input[name=checkbox3]:checked").length;
                    if (checked == 0) {
                        $('#fb-container3').hide();
                    } else {
                        $('#fb-container3').show();
                    }
                });
            });

            // document.querySelector(".submit").addEventListener("click", function(event) {
            //     // Allow form submission
            //     // You can add additional validation or actions here if needed
            //     var t1a1 = document.querySelector('input[name="specificity1"]:checked');
            //     var t1a2 = document.querySelector('input[name="content_similarity1"]:checked');
            //     if (!t1a1 || !t1a2) {
            //         console.log("Error: You must answer all questions.");
            //         document.getElementById("error-box").classList.remove('hidden');
            //         document.getElementById("error-box").style.display = "block";
            //         event.preventDefault();
            //     }
            // });
                    


    
        </script>
    </body>
</html>